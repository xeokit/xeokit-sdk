<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>xeokit Examples</title>
    <link href='https://fonts.googleapis.com/css?family=Exo+2:400,800,900,700,600,500|Roboto:100,300,400,500,700,900'
          rel='stylesheet' type='text/css'>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js"></script>
    

    <style>

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            font-size: 1rem;
            line-height: 1.50;
            color: #212529;
            background-color: #000000;
            text-decoration: none;
            word-spacing: normal;
            text-align: left;
            letter-spacing: 0;
            -webkit-font-smoothing: antialiased;
            overflow-y: hidden;
            overflow-x: hidden;
            margin: 0;
            width: 100%;
            height: 100%;
        }

        #index {
            position: absolute;
            height: 100%;
            background: #fdfdfd;
            overflow: auto;
            border-right: 2px solid #212529;
            padding: 20px;
            padding-bottom: 100px;
            user-select: none;
        }

        #index a {
            /*text-decoration: none;*/
        }

        #index h1 {
            margin-top: 0;
            margin-bottom: 0;
            font-size: 1.8rem;
            font-weight: normal;
            text-decoration: none !important;
        }

        #index h1 a {
            color: #212529;
        }

        #index h2 {
            font-size: 1.4rem;
            font-weight: normal;
            padding-top: 20px;
            padding-bottom: 10px;
            text-decoration: none;
        }

        #index .link {
            margin-left: 0 !important;
            padding-left: 0 !important;
            padding-top: 1px;
            text-decoration: none;
            font-weight: normal;
            background: #fdfdfd;
            cursor: pointer;
            line-height: 1.5em;
        }

        #index .selected {
            margin-left: -5px !important;
            padding-left: 5px !important;
            padding-top: 0;
            padding-bottom: 0;
            border: 1px solid #676767;
            background: #FFFF44;
        }


        #index .commentFirst {
            margin-left: 0 !important;
            padding-left: 0 !important;
            padding-top: 1px;
            text-decoration: none;
            font-weight: normal;
            font-style: italic;
            color: #8b8b8b;
            cursor: pointer;
            line-height: 1.5em;
            margin-top: 10px;
            margin-bottom: 10px;
        }

        #index .comment {
            color: #8b8b8b;
            margin-left: 0 !important;
            padding-left: 0 !important;
            padding-top: 1px;
            text-decoration: none;
            font-weight: normal;
            font-style: italic;
            cursor: pointer;
            line-height: 1.5em;
            margin-top: 10px;
            margin-bottom: 10px;
        }

        #index .link:hover {
            text-decoration: underline;
        }

        .content-container {
            position: absolute;
            z-index: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            margin: 0 auto;
            overflow: hidden;
            opacity: 1.0;
            pointer-events: all;
            transition: all 300ms ease-in-out;
            background: lightblue;
        }

        .content-overlay {
            position: absolute;
            z-index: 7;
            padding: 0;
            width: 100%;
            height: 100%;
            margin: 0 auto;
            overflow: hidden;
            opacity: 1.0;
            pointer-events: none;
            transition: all 300ms ease-in-out;
        }

        .slideout-sidebar {
            position: fixed;
            top: 0;
            left: -600px;
            z-index: 10;
            width: 560px;
            height: 100%;
            padding: 0;
            transition: all 300ms ease-in-out;
        }

        #index_toggle {
            display: none;
        }

        #index_toggle:hover {
            cursor: pointer;
        }

        .index-button {
            position: absolute;
            font-size: 18px;
            top: 15px;
            left: 20px;
            text-align: center;
            vertical-align: middle;
            -webkit-user-select: none;
            -ms-user-select: none;
            user-select: none;
            z-index: 5;
            transition: all 300ms ease-in-out;
        }

        .index-button:hover {
            cursor: pointer;
            color: black;
        }

        .page-title {
            position: absolute;
            font-size: 1.6rem;
            top: 17px;
            left: 75px;
            text-align: left;
            -webkit-user-select: none;
            -ms-user-select: none;
            user-select: none;
            z-index: 5;
            transition: all 300ms ease-in-out;
            max-width: calc(100% - 550px);
            pointer-events: none;
        }

        .viewSourceButton {
            position: absolute;
            left: 20px;
            bottom: 15px;
            z-index: 200;
            transition: all 300ms ease-in-out;
        }

        .viewSourceButton:hover {
            cursor: pointer;
            opacity: 1;
            color: black;
        }

        #index_toggle:checked ~ .slideout-sidebar {
            left: 0;
        }

        #index_toggle:checked + .index-button {
            left: 585px;
            color: white;
        }

        #index_toggle:checked ~ .page-title {
            left: 530px;
            color: white;
        }

        #index_toggle:checked ~ .viewSourceButton {
            left: 570px;
        }

        #index_toggle:checked ~ .content-container {
            opacity: 0.4;
            pointer-events: none;
        }

        #index_toggle:checked ~ .content-overlay {
            pointer-events: all;
        }

    </style>
</head>
<body>
<input type="checkbox" id="index_toggle"/>
<label for="index_toggle" class="index-button"><i class="fas fa-2x fa-bars"></i></label>
<div class="page-title" id="page-title"></div>
<div class="viewSourceButton" id="viewSourceButton"><i class="fas fa-2x fa-code"></i></div>
<div class="content-overlay" id="viewer-overlay"></div>
<iframe class="content-container" id="viewer" src="../default.html"></iframe>
<div class="slideout-sidebar">
    <div id="index"><h1><a href="https://xeokit.io">xeokit</a> / <a href="../">Examples</a> / SceneModel Examples</h1></div>
</div>
</body>
<script>

    const files = {

        "VBO Instancing": [

            "#Vertex buffer object geometry instancing tests",

            ["vbo_instancing_precompressed_triangles", "SceneModel test: VBOs, geometry reuse, pre-compressed geometry, triangle primitives"],
            ["vbo_instancing_precompressed_triangles_rtc", "SceneModel test: VBOs, no geometry reuse, pre-compressed geometry, triangle primitives, RTC coordinates"],
            ["vbo_instancing_precompressed_triangles_textures_jpg", "SceneModel test: VBOs, geometry reuse, pre-compressed geometry, triangle primitives, JPEG texture"],
            ["vbo_instancing_precompressed_triangles_textures_ktx2", "SceneModel test: VBOs, geometry reuse, pre-compressed geometry,  triangle primitives, KTX2 texture"],
            ["vbo_instancing_autocompressed_triangles", "SceneModel test: VBOs, geometry reuse, auto-compressed, triangle primitives"],
            ["vbo_instancing_autocompressed_triangles_rtc", "SceneModel test: VBOs, geometry reuse, auto-compressed, triangle primitives, RTC"],
            ["vbo_instancing_autocompressed_triangles_textures_jpg", "SceneModel test: VBOs, geometry reuse, autocompressed coordinates, triangle primitives, JPEG texture"],
            ["vbo_instancing_autocompressed_triangles_textures_ktx2", "SceneModel test: VBOs, geometry reuse, autocompressed coordinates,  triangle primitives, KTX2 texture"],
            ["vbo_instancing_geometries", "SceneModel test: instanced points, lines and triangles geometries"]
        ],

        "VBO Batching": [

            "#Vertex buffer object geometry batching tests",

            ["vbo_batching_precompressed_triangles", "SceneModel test: VBOs, no geometry reuse, pre-compressed geometry, triangle primitives"],
            ["vbo_batching_precompressed_triangles_rtc", "SceneModel test: VBOs, no geometry reuse, pre-compressed geometry, triangle primitives, RTC coordinates"],
            ["vbo_batching_precompressed_triangles_textures_jpg", "SceneModel test: VBOs, no geometry reuse, pre-compressed geometry, triangle primitives, JPEG texture"],
            ["vbo_batching_precompressed_triangles_textures_ktx2", "SceneModel test: VBOs, no geometry reuse, pre-compressed geometry, triangle primitives, KTX2 texture"],
            ["vbo_batching_autocompressed_triangles", "SceneModel test: VBOs, no geometry reuse, auto-compressed, triangle primitives"],
            ["vbo_batching_autocompressed_triangles_rtc", "SceneModel test: VBOs, no geometry reuse, auto-compressed, triangle primitives, RTC coordinates"],
            ["vbo_batching_autocompressed_triangles_textures_jpg", "SceneModel test: VBOs, geometry reuse, auto-compressed, triangle primitives, JPEG texture"],
            ["vbo_batching_autocompressed_triangles_textures_ktx2", "SceneModel test: VBOs, geometry reuse, auto-compressed, triangle primitives, KTX2 texture"],
            ["vbo_batching_geometries", "SceneModel test: batched points, lines and triangles geometries"]
        ],

        "DTX Batching": [

            "#Data texture geometry batching tests",

            ["dtx_batching_precompressed_triangles", "SceneModel test: data textures, no geometry reuse, pre-compressed geometry, triangle primitives"],
            ["dtx_batching_precompressed_bucketed_triangles", "SceneModel test: data textures, geometry reuse, pre-compressed and pre-bucketed geometry, triangle primitives"],
            ["dtx_batching_autocompressed_triangles", "SceneModel test: data texture, no geometry reuse, auto-compressed, triangle primitives"],
            ["dtx_batching_geometries", "SceneModel test: data textures, batching points, lines and triangles geometries"]
        ],

        "DTX Instancing": [

            "#Data texture geometry instancing tests",

            ["dtx_instancing_precompressed_triangles", "SceneModel test: data textures, geometry reuse, pre-compressed geometry, triangle primitives"],
            ["dtx_instancing_precompressed_bucketed_triangles", "SceneModel test: data textures, geometry reuse, pre-compressed and pre-bucketed geometry, triangle primitives"],
            ["dtx_instancing_autocompressed_triangles", "SceneModel test: data textures, geometry reuse, auto-compressed, triangle primitives"],
            ["dtx_instancing_geometries", "SceneModel test: data textures, instanced points, lines and triangles geometries"]
        ],

        // "RTC": [
        //
        //     "#RTC + VBO + Pre-quancompressed",
        //
        //     ["vbo_batching_precompressed_triangles_rtc", "SceneModel test: VBOs, no geometry reuse, pre-compressed geometry, triangle primitives, RTC coordinates"],
        //
        //     ["rtc_vbo_batching_autocompressed_triangles", "Lighting VBO view directional"],
        //
        //     "#RTC + DTX + Uncompressed",
        //
        //     ["vbo_instancing_autocompressed_triangles_rtc", "SceneModel test: VBOs, geometry reuse, auto-compressed, triangle primitives, RTC coordinates"],
        //
        //     ["rtc_dtx_batching_autocompressed_triangles", "Lighting VBO view directional"],
        //     ["rtc_dtx_instancing_autocompressed_triangles", "Lighting VBO view directional"],
        //     ["rtc_dtx_instancing_precompressed_triangles", "Lighting VBO view directional"],
        //
        //     ["dtx_instancing_precompressed_triangles_rtc", "SceneModel test: date textures, geometry reuse, pre-compressed geometry, triangle primitives, RTC coordinates"],
        //
        //     ["dtx_instancing_autocompressed_triangles_rtc", "SceneModel test: data textures, geometry reuse, auto-compressed, triangle primitives, RTC coordinates"],
        //
        //     ["dtx_batching_rtc_sectionPlanes", "SceneModel test: data texture, no geometry reuse, auto-compressed, triangle primitives, RTC coordinates, section planes"],
        //
        //     ["dtx_batching_autocompressed_triangles_rtc", "SceneModel test: data texture, no geometry reuse, auto-compressed, triangle primitives, RTC coordinates"],
        //     ["dtx_batching_precompressed_triangles_rtc", "SceneModel test: data texture, no geometry reuse, pre-compressed geometry, triangle primitives, RTC coordinates"]
        // ],

        "worldMatrix": [

            ["worldMatrix_vbo_batching_autocompressed_triangles", ""]
        ],


        "Repositioning": [

            ["repositioning_vbo_instancing", "SceneModel test: repositioning SceneModel with VBOs and geometry reuse"],
            ["repositioning_vbo_instancing_rtc", "SceneModel test: repositioning SceneModel with VBOs and geometry reuse, RTC coordinates"],

            ["repositioning_vbo_batching", "SceneModel test: repositioning SceneModel with VBOs and no geometry reuse"],
            ["repositioning_vbo_batching_rtc", "SceneModel test: repositioning SceneModel with VBOs and no geometry reuse, RTC coordinates"],

            ["repositioning_dtx_batching", "SceneModel test: repositioning SceneModel with DTX and no geometry reuse"],
            ["repositioning_dtx_batching_rtc", "SceneModel test: repositioning SceneModel with DTX and no geometry reuse, RTC coordinates"],

            ["repositioning_dtx_instancing", "SceneModel test: repositioning SceneModel with DTX and geometry reuse"],
            ["repositioning_dtx_instancing_precompressed", "SceneModel test: repositioning SceneModel with DTX and precompressed geometry reuse"],
            ["repositioning_dtx_instancing_rtc", "SceneModel test: repositioning SceneModel with DTX and geometry reuse, RTC coordinates"],
            ["repositioning_dtx_instancing_precompressed_rtc", "SceneModel test: repositioning SceneModel with DTX and precompressed geometry reuse, RTC coordinates"],
        ],

        "Dynamic Transforms": [

            ["transforms_vbo_instancing_triangles", "SceneModel test: VBOs, geometry reuse, autocompressed coordinates,  triangle primitives, animated transforms"],
            ["transforms_dtx_instancing_triangles", "SceneModel test: data textures, geometry reuse, autocompressed coordinates,  triangle primitives, animated transforms"]
        ],
        "Effects": [

            "#Emphasis effects",

            "#VBO batching emphasis",

            ["effects_vbo_batching_opacity", "SceneModel test: VBOS and no geometry reuse - mouseover to make objects transparent"],
            ["effects_vbo_batching_colorize", "SceneModel test: VBOS and no geometry reuse  - mouseover to colorize objects"],
            ["effects_vbo_batching_highlight", "SceneModel test: VBOS and no geometry reuse  - mouseover to highlight objects"],
            ["effects_vbo_batching_select", "SceneModel test: VBOS and no geometry reuse  - mouseover to select objects"],
            ["effects_vbo_batching_xray", "SceneModel test: VBOS and no geometry reuse  - mouseover to X-ray objects"],

            "#VBO instancing emphasis",

            ["effects_vbo_instancing_opacity", "SceneModel test: VBOS and geometry reuse - mouseover to make objects transparent"],
            ["effects_vbo_instancing_colorize", "SceneModel test: VBOS and geometry reuse  - mouseover to colorize objects"],
            ["effects_vbo_instancing_highlight", "SceneModel test: VBOS and geometry reuse  - mouseover to highlight objects"],
            ["effects_vbo_instancing_select", "SceneModel test: VBOS and geometry reuse  - mouseover to select objects"],
            ["effects_vbo_instancing_xray", "SceneModel test: VBOS and geometry reuse  - mouseover to X-ray objects"],

            "#DTX batching emphasis (DTX instancing uses same code paths)",

            ["effects_dtx_batching_opacity", "SceneModel test: DTX and no geometry reuse - mouseover to make objects transparent"],
            ["effects_dtx_batching_colorize", "SceneModel test: DTX and no geometry reuse  - mouseover to colorize objects"],
            ["effects_dtx_batching_highlight", "SceneModel test: DTX and no geometry reuse  - mouseover to highlight objects"],
            ["effects_dtx_batching_select", "SceneModel test: DTX and no geometry reuse  - mouseover to select objects"],

            "#VBO SAO (ambient shadows)",

            ["effects_vbo_instancing_SAO", "SceneModel test: VBOs, geometry reuse and SAO"],
            ["effects_vbo_batching_SAO", "SceneModel test: VBOs, no geometry reuse and SAO"],

            "#DTX SAO (ambient shadows)",

            ["effects_dtx_instancing_SAO", "SceneModel test: data textures, geometry reuse and SAO"],
            ["effects_dtx_batching_SAO", "SceneModel test: data textures, no geometry reuse and SAO"]
        ],

        "Slicing": [

            "#Section planes",

            ["sectionPlanes_vbo_batching_rtc", "SceneModel test: VBOs, no geometry reuse, RTC, SectionPlanes"],
            ["sectionPlanes_vbo_instancing_rtc", "SceneModel test: VBOs, geometry reuse, RTC, SectionPlanes"],
            ["sectionPlanes_dtx_batching_rtc", "SceneModel test: data textures, no geometry reuse, RTC, SectionPlanes"],
            ["sectionPlanes_dtx_instancing_rtc", "SceneModel test: data textures, no geometry reuse, RTC, SectionPlanes"],

            ["vbo_batching_rtc_sectionPlanes", "SceneModel test: VBOs, no geometry reuse, auto-compressed, triangle primitives, RTC coordinates, section planes"]
        ],


        "Lighting": [

            "#Lighting tests",

            ["lighting_vbo_view_dir", "Various scene representations with directional view-space lights"]
        ],

        // "LoD": [
        //
        //     "#Level-of-Detail culling",
        //
        //     ["lod_dtx_instancing_autocompressed_triangles", "SceneModel test: DTX, geometry reuse, autocompressed geometry, triangles and LoD culling"],
        //     ["lod_dtx_batching_autocompressed_triangles", "SceneModel test: DTX, no geometry reuse, autocompressed geometry, triangles and LoD culling"],
        //
        //     ["lod_vbo_instancing_autocompressed_triangles", "SceneModel test: VBO, geometry reuse, autocompressed geometry, triangles and LoD culling"],
        //     ["lod_vbo_batching_autocompressed_triangles", "SceneModel test: VBO, no geometry reuse, autocompressed geometry, triangles and LoD culling"]
        // ],

        "Snap-picking": [

            "#Snap-to-vertex",

            ["snapToVertex_vbo_instancing_triangles", "SceneModel test: VBOs, geometry reuse, snap-to-vertex"],
            ["snapToVertex_vbo_instancing_precompressed_triangles", "SceneModel test: VBOs, precompressed geometry, geometry reuse, snap-to-vertex"],
            ["snapToVertex_dtx_instancing_triangles", "SceneModel test: DTXs, geometry reuse, snap-to-vertex"],
            ["snapToVertex_vbo_batching_triangles", "SceneModel test: VBOs, no geometry reuse, snap-to-vertex"],
            ["snapToVertex_vbo_batching_precompressed_triangles", "SceneModel test: VBOs, precompressed geometry, no geometry reuse, snap-to-vertex"],

            ["snapToVertex_dtx_batching_triangles", "SceneModel test: DTXs, no geometry reuse, snap-to-vertex"],
            ["snapToVertex_vbo_instancingAndBatching_triangles", "SceneModel test: VBOs, instancing and batching, snap-to-vertex"],

            ["snapToVertex_vbo_instancing_autocompressed_triangles_rtc", "SceneModel test: VBOs, instancing, snap-to-vertex, RTC coordinates"],
            ["snapToVertex_vbo_batching_autocompressed_triangles_rtc", "SceneModel test: VBOs, batching, snap-to-vertex, RTC coordinates"],
            ["snapToVertex_dtx_instancing_autocompressed_triangles_rtc", "SceneModel test: DTX, instancing, snap-to-vertex, RTC coordinates"],
            ["snapToVertex_dtx_batching_autocompressed_triangles_rtc", "SceneModel test: DTX, batching, snap-to-vertex, RTC coordinates"],

            "#Snap-to-edge",

            ["snapToEdge_vbo_instancing_triangles", "SceneModel test: VBOs, geometry reuse, snap-to-edges"],
            ["snapToEdge_dtx_instancing_triangles", "SceneModel test: DTXs, geometry reuse, snap-to-edges"],
            ["snapToEdge_vbo_batching_triangles", "SceneModel test: VBOs, no geometry reuse, snap-to-edges"],
            ["snapToEdge_dtx_batching_triangles", "SceneModel test: DTXs, no geometry reuse, snap-to-edges"],

            ["snapToEdge_vbo_instancing_autocompressed_triangles_rtc", "SceneModel test: VBOs, instancing, snap-to-edges, RTC coordinates"],
            ["snapToEdge_vbo_batching_autocompressed_triangles_rtc", "SceneModel test: VBOs, batching, snap-to-edges, RTC coordinates"],
            ["snapToEdge_dtx_instancing_autocompressed_triangles_rtc", "SceneModel test: DTX, instancing, snap-to-edges, RTC coordinates"],
            ["snapToEdge_dtx_batching_autocompressed_triangles_rtc", "SceneModel test: DTX, batching, snap-to-edges, RTC coordinates"],

        ],

        "Benchmarks": [

            "#Performance benchmarks",

            ["benchmark_vbo_batching_autocompressed_triangles", "SceneModel test VBO batching autocompressed triangles benchmark"],
            //   ["benchmark_vbo_instancing_autocompressed_triangles", "SceneModel test VBO instancing triangles benchmark"],
            ["benchmark_dtx_batching_autocompressed_triangles", "SceneModel test DTX batching autocompressed triangles benchmark"],
        ]
    };

    const list = document.getElementById('index');
    const viewer = document.getElementById('viewer');
    const viewerOverlay = document.getElementById('viewer-overlay');

    const container = document.createElement('div');
    list.appendChild(container);

    const viewSourceButton = document.getElementById('viewSourceButton');
    viewSourceButton.addEventListener('click', function (event) {
        window.open('https://github.com/xeokit/xeokit-sdk/blob/master/examples/scenemodel/' + selected + '.html');
    }, false);

    const indexToggle = document.getElementById("index_toggle");
    const pageTitle = document.getElementById('page-title');

    viewerOverlay.addEventListener('click', function (event) {
        indexToggle.checked = false;
    }, false);

    // indexToggle.addEventListener('click', function (event) {
    //     viewer.src="default.html";
    // }, false);

    const sectionDivs = {};
    const divs = {};
    const fileDescriptions = {};
    let selected = null;
    let index = 1;
    var indexStr;

    // Index

    let div = document.createElement('h2');
    div.textContent = "Index";

    container.appendChild(div);
    container.appendChild(document.createElement('hr'));

    const sectionNames = Object.keys(files);
    // sectionNames.sort((a, b) => {
    //     if (a < b) {
    //         return -1;
    //     }
    //     if (a > b) {
    //         return 1;
    //     }
    //     return 0;
    // });

    for (let i = 0, len = sectionNames.length; i < len; i++) {
        const sectionName = sectionNames[i];
        const sectionFiles = files[sectionName];
        var sectionDiv = document.createElement('div');
        sectionDiv.className = 'link';
        indexStr = "" + index++ + ".";
        for (let i = indexStr.length, len = 5; i < len; i++) {
            indexStr += ".";
        }
        sectionDiv.textContent = indexStr + sectionName;
        sectionDiv.addEventListener('click', (function () {
            const _sectionName = sectionName;
            return function () {
                sectionDivs[_sectionName].scrollIntoView();
            }
        })());
        container.appendChild(sectionDiv);
    }

    container.appendChild(document.createElement('hr'));

    _index = 1;

    let clickedFile = null;

    for (let i = 0, len = sectionNames.length; i < len; i++) {
        const sectionName = sectionNames[i];
        const sectionFiles = files[sectionName];
        const sectionDiv = document.createElement('h2');
        sectionDiv.textContent = _index++ + ". " + sectionName;
        container.appendChild(sectionDiv);
        sectionDivs[sectionName] = sectionDiv;
        container.appendChild(document.createElement('hr'));

        for (let i = 0; i < sectionFiles.length; i++) {

            let sectionFile = sectionFiles[i];
            let fileName;
            let fileDesc;

            if (!isString(sectionFile)) {
                fileName = sectionFile[0];
                fileDesc = sectionFile[1];
            } else {
                fileName = sectionFile;
                fileDesc = sectionFile;
            }

            if (fileDesc.charAt(0) === "#") {
                const commentDiv = document.createElement('div');
                commentDiv.textContent = "// " + fileDesc.substring(1);
                commentDiv.className = (i === 0 ? 'commentFirst' : 'comment');
                container.appendChild(commentDiv);
                continue;
            }

            const fileNameComponents = fileName.split('_');
            //    fileNameComponents.shift();
            const fileNamePath = fileNameComponents.join(' / ');
            const fileNameDiv = document.createElement('div');
            fileNameDiv.className = 'link';
            fileNameDiv.textContent = fileNamePath; // expandCamel(name);
            fileNameDiv.addEventListener('click', (function () {
                const _file = fileName;
                return function () {
                    clickedFile = _file;
                    window.location.hash = "#" + _file;
                    viewer.src = "";
                }
            })());
            container.appendChild(fileNameDiv);
            divs[fileName] = fileNameDiv;
            fileDescriptions[fileName] = fileDesc;
        }
    }

    const paddingDiv = document.createElement('div');
    paddingDiv.style["height"] = "50px";
    container.appendChild(paddingDiv);

    function expandCamel(str) {
        return str.replace(/([A-Z])/g, function ($1) {
            return " " + $1.toLowerCase();
        });
    }

    if (window.location.hash !== '') {
        load(window.location.hash.substring(1));
    } else {
        indexToggle.checked = true;
    }

    var hash = window.location.hash;

    window.setInterval(function () {
        if (window.location.hash !== hash || viewer.src === "") {
            setTimeout(() => {
                load(window.location.hash.substring(1));
                hash = window.location.hash;
            }, 300)

            indexToggle.checked = false;
        }
    }, 70);

    function scrollIntoView(div) {
        document.getElementById("index").scrollTop = documentOffsetTop(div) - (window.innerHeight / 6);
    }

    function documentOffsetTop(div) {
        return div.offsetTop + (div.offsetParent ? documentOffsetTop(div.offsetParent) : 0);
    }

    function load(file) {

        pageTitle.innerText = fileDescriptions[file] || "Example not found - perhaps renamed?";

        if (file.indexOf(".html", file.length - 5) !== -1) {
            window.location = "./" + file + ".html";
            return;
        }

        if (selected !== null) divs[selected].className = 'link';
        divs[file].className = 'link selected';
        window.location.hash = file;
        viewer.src = file + '.html';
        viewer.focus();
        viewSourceButton.style.display = '';
        selected = file;
        if (clickedFile !== file) {
            scrollIntoView(divs[file]);
        }
        clickedFile = null;
    }

    function isString(value) {
        return (typeof value === 'string' || value instanceof String);
    }

</script>
</html>
